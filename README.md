# ğŸš€ YAPI MCP PRO - ä¸“ä¸šçº§YApiæ¥å£ç®¡ç†å·¥å…·

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Node.js Version](https://img.shields.io/badge/node-%3E%3D16.0.0-brightgreen.svg)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-4.9+-blue.svg)](https://www.typescriptlang.org/)

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Model Context Protocol (MCP) æœåŠ¡å™¨ï¼Œä¸“ä¸º YApi æ¥å£ç®¡ç†å¹³å°è®¾è®¡ã€‚æ”¯æŒåœ¨ Cursorã€Claude Desktop ç­‰ AI ç¼–è¾‘å™¨ä¸­ç›´æ¥æ“ä½œ YApiï¼Œæä¾›å®Œæ•´çš„æ¥å£ç”Ÿå‘½å‘¨æœŸç®¡ç†åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•

- [âœ¨ æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [ğŸ¯ æ”¯æŒçš„AIç¼–è¾‘å™¨](#-æ”¯æŒçš„aiç¼–è¾‘å™¨)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ”§ é…ç½®æŒ‡å—](#-é…ç½®æŒ‡å—)
- [ğŸ“š MCPå·¥å…·è¯¦è§£](#-mcpå·¥å…·è¯¦è§£)
- [ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹](#-ä½¿ç”¨ç¤ºä¾‹)
- [ğŸ› ï¸ é¡¹ç›®ç®¡ç†](#ï¸-é¡¹ç›®ç®¡ç†)
- [ğŸ” æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [ğŸ“– é«˜çº§ç”¨æ³•](#-é«˜çº§ç”¨æ³•)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ å…¨é¢çš„æ¥å£ç®¡ç†
- **æ¥å£CRUD**: åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤æ¥å£
- **æ™ºèƒ½æœç´¢**: å¤šç»´åº¦æœç´¢æ¥å£ï¼ˆåç§°ã€è·¯å¾„ã€é¡¹ç›®ï¼‰
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ¥å£å¤åˆ¶ã€æ‰¹é‡å¯¼å…¥å¯¼å‡º
- **å®æ—¶åŒæ­¥**: ä¸YApiæœåŠ¡å™¨å®æ—¶åŒæ­¥æ•°æ®

### ğŸ—ï¸ é¡¹ç›®ä¸åˆ†ç±»ç®¡ç†
- **é¡¹ç›®ç®¡ç†**: åˆ›å»ºã€æ›´æ–°é¡¹ç›®ä¿¡æ¯
- **åˆ†ç±»ç®¡ç†**: å®Œæ•´çš„æ¥å£åˆ†ç±»ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **æƒé™æ§åˆ¶**: åŸºäºYApiæƒé™ç³»ç»Ÿçš„å®‰å…¨è®¿é—®

### ğŸ‘¥ ç”¨æˆ·ä¸å›¢é˜Ÿåä½œ
- **ç”¨æˆ·ä¿¡æ¯**: è·å–å½“å‰ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
- **å›¢é˜Ÿç®¡ç†**: æŸ¥çœ‹ç”¨æˆ·æ‰€å±åˆ†ç»„å’Œæƒé™

### ğŸ§ª æµ‹è¯•ä¸è´¨é‡ä¿è¯
- **æµ‹è¯•é›†åˆ**: ç®¡ç†æ¥å£æµ‹è¯•ç”¨ä¾‹é›†åˆ
- **æ•°æ®å¯¼å…¥å¯¼å‡º**: æ”¯æŒSwaggerã€JSONç­‰æ ¼å¼

### âš¡ æ€§èƒ½ä¸ä½“éªŒ
- **æ™ºèƒ½ç¼“å­˜**: å¤šå±‚ç¼“å­˜æœºåˆ¶ï¼Œæå‡å“åº”é€Ÿåº¦
- **å®æ—¶é€šä¿¡**: SSEæ”¯æŒï¼Œå®æ—¶æ•°æ®æ›´æ–°
- **åŒé‡è®¤è¯**: Cookieå’ŒTokenä¸¤ç§è®¤è¯æ–¹å¼
- **è¯¦ç»†æ—¥å¿—**: å®Œæ•´çš„æ“ä½œæ—¥å¿—å’Œé”™è¯¯è¿½è¸ª

## ğŸ¯ æ”¯æŒçš„AIç¼–è¾‘å™¨

| ç¼–è¾‘å™¨ | æ”¯æŒçŠ¶æ€ | é…ç½®æ–¹å¼ |
|--------|----------|----------|
| **Cursor** | âœ… å®Œå…¨æ”¯æŒ | MCPé…ç½® |
| **Claude Desktop** | âœ… å®Œå…¨æ”¯æŒ | MCPé…ç½® |
| **VS Code** | ğŸ”„ å¼€å‘ä¸­ | æ’ä»¶å½¢å¼ |
| **å…¶ä»–æ”¯æŒMCPçš„å·¥å…·** | âœ… ç†è®ºæ”¯æŒ | æ ‡å‡†MCPåè®® |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 16.0.0
- **npm/pnpm**: æœ€æ–°ç‰ˆæœ¬
- **YApiæœåŠ¡å™¨**: å¯è®¿é—®çš„YApiå®ä¾‹

### 2. å®‰è£…éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
git clone git@github.com:guocong-bincai/YAPI_MCP_PRO.git
cd YAPI_MCP_PRO

# å®‰è£…ä¾èµ–
npm install
# æˆ–ä½¿ç”¨ pnpm (æ¨è)
pnpm install

# æ„å»ºé¡¹ç›®
npm run build
```

### 3. å¿«é€Ÿé…ç½®

```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim .env
```

### 4. å¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨é¡¹ç›®ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰
./start-mcp.sh start

# æˆ–æ‰‹åŠ¨å¯åŠ¨
npm run dev
```

## ğŸ”§ é…ç½®æŒ‡å—

### è®¤è¯æ–¹å¼é€‰æ‹©

#### ğŸª Cookieè®¤è¯ï¼ˆæ¨èï¼‰

**ä¼˜åŠ¿**: è‡ªåŠ¨å‘ç°æ‰€æœ‰é¡¹ç›®ï¼Œé…ç½®ç®€å•ï¼Œæƒé™å®Œæ•´

**è·å–æ­¥éª¤**:
1. æµè§ˆå™¨ç™»å½•YApi
2. æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)
3. ç½‘ç»œé¢æ¿ä¸­å¤åˆ¶ä»»æ„è¯·æ±‚çš„Cookie
4. é…ç½®åˆ° `.env` æ–‡ä»¶

```env
# Cookieè®¤è¯é…ç½®
YAPI_BASE_URL=http://your-yapi-server.com
YAPI_TOKEN=_yapi_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...; _yapi_uid=1413
```

#### ğŸ”‘ Tokenè®¤è¯

**ä¼˜åŠ¿**: é•¿æœŸæœ‰æ•ˆï¼Œå®‰å…¨æ€§é«˜ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ

**è·å–æ­¥éª¤**:
1. YApié¡¹ç›® â†’ è®¾ç½® â†’ Tokené…ç½®
2. å¤åˆ¶é¡¹ç›®Tokenå’Œé¡¹ç›®ID
3. æŒ‰æ ¼å¼é…ç½®å¤šä¸ªé¡¹ç›®

```env
# Tokenè®¤è¯é…ç½®
YAPI_BASE_URL=http://your-yapi-server.com
YAPI_TOKEN=654:b988d9c0ac6ffc500085,123:another_token_here
```

### å®Œæ•´é…ç½®å‚æ•°

```env
# === åŸºç¡€é…ç½® ===
YAPI_BASE_URL=http://your-yapi-server.com    # YApiæœåŠ¡å™¨åœ°å€
PORT=3388                                     # MCPæœåŠ¡ç«¯å£

# === è®¤è¯é…ç½® ===
YAPI_TOKEN=your_auth_info                     # è®¤è¯ä¿¡æ¯ï¼ˆCookieæˆ–Tokenï¼‰

# === æ€§èƒ½é…ç½® ===
YAPI_CACHE_TTL=10                            # ç¼“å­˜æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
YAPI_LOG_LEVEL=info                          # æ—¥å¿—çº§åˆ«

# === å¯é€‰é…ç½® ===
YAPI_GROUP_ID=1557                           # é»˜è®¤åˆ†ç»„IDï¼ˆåˆ›å»ºé¡¹ç›®æ—¶ä½¿ç”¨ï¼‰
```

### Cursoré…ç½®

**é…ç½®æ–‡ä»¶ä½ç½®**: 
- macOS: `~/Library/Application Support/Cursor/User/settings.json`
- Windows: `%APPDATA%\Cursor\User\settings.json`
- Linux: `~/.config/Cursor/User/settings.json`

```json
{
  "mcpServers": {
    "yapi-mcp-pro": {
      "url": "http://localhost:3388/sse"
    }
  }
}
```

## ğŸ“š MCPå·¥å…·è¯¦è§£

YAPI MCP PRO æä¾› **19ä¸ªä¸“ä¸šå·¥å…·**ï¼Œæ¶µç›–YApiçš„å®Œæ•´åŠŸèƒ½ç”Ÿæ€ï¼š

### ğŸ”§ åŸºç¡€æ¥å£ç®¡ç† (5ä¸ªå·¥å…·)

#### 1. `yapi_get_api_desc` - è·å–æ¥å£è¯¦ç»†ä¿¡æ¯
**åŠŸèƒ½**: è·å–æŒ‡å®šæ¥å£çš„å®Œæ•´å®šä¹‰ä¿¡æ¯
**å‚æ•°**:
- `projectId` (string): é¡¹ç›®ID
- `apiId` (string): æ¥å£ID

**è¿”å›ä¿¡æ¯**:
- æ¥å£åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€è·¯å¾„ã€æ–¹æ³•ï¼‰
- è¯·æ±‚å‚æ•°ï¼ˆURLå‚æ•°ã€æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ï¼‰
- å“åº”ä¿¡æ¯ï¼ˆå“åº”ç±»å‹ã€å“åº”å†…å®¹ï¼‰
- æ¥å£æ–‡æ¡£å’Œæè¿°

#### 2. `yapi_save_api` - æ–°å¢æˆ–æ›´æ–°æ¥å£
**åŠŸèƒ½**: åˆ›å»ºæ–°æ¥å£æˆ–æ›´æ–°ç°æœ‰æ¥å£
**å‚æ•°**:
- `projectId` (string): é¡¹ç›®ID
- `catid` (string): åˆ†ç±»ID
- `title` (string): æ¥å£æ ‡é¢˜
- `path` (string): æ¥å£è·¯å¾„
- `method` (string): è¯·æ±‚æ–¹æ³•
- `id` (string, å¯é€‰): æ¥å£IDï¼ˆæ›´æ–°æ—¶å¿…å¡«ï¼‰
- `desc` (string, å¯é€‰): æ¥å£æè¿°
- `req_*` (å¯é€‰): å„ç§è¯·æ±‚å‚æ•°é…ç½®
- `res_*` (å¯é€‰): å“åº”é…ç½®

#### 3. `yapi_search_apis` - æœç´¢æ¥å£
**åŠŸèƒ½**: å¤šç»´åº¦æœç´¢æ¥å£
**å‚æ•°**:
- `nameKeyword` (string, å¯é€‰): æ¥å£åç§°å…³é”®å­—
- `pathKeyword` (string, å¯é€‰): æ¥å£è·¯å¾„å…³é”®å­—
- `projectKeyword` (string, å¯é€‰): é¡¹ç›®å…³é”®å­—
- `limit` (number, å¯é€‰): è¿”å›ç»“æœæ•°é‡é™åˆ¶

**æœç´¢èƒ½åŠ›**:
- æ”¯æŒæ¨¡ç³ŠåŒ¹é…
- è·¨é¡¹ç›®æœç´¢
- æ™ºèƒ½æ’åºå’Œå»é‡

#### 4. `yapi_delete_interface` - åˆ é™¤æ¥å£
**åŠŸèƒ½**: åˆ é™¤æŒ‡å®šæ¥å£
**å‚æ•°**:
- `interfaceId` (string): æ¥å£ID
- `projectId` (string): é¡¹ç›®ID

#### 5. `yapi_copy_interface` - å¤åˆ¶æ¥å£
**åŠŸèƒ½**: å¤åˆ¶æ¥å£åˆ°æŒ‡å®šåˆ†ç±»
**å‚æ•°**:
- `interfaceId` (string): æºæ¥å£ID
- `projectId` (string): é¡¹ç›®ID
- `catId` (string, å¯é€‰): ç›®æ ‡åˆ†ç±»ID

### ğŸ“Š é¡¹ç›®ç®¡ç† (3ä¸ªå·¥å…·)

#### 6. `yapi_list_projects` - åˆ—å‡ºé¡¹ç›®
**åŠŸèƒ½**: è·å–æ‰€æœ‰å¯è®¿é—®çš„é¡¹ç›®åˆ—è¡¨
**è¿”å›ä¿¡æ¯**:
- é¡¹ç›®IDå’Œåç§°
- é¡¹ç›®æè¿°
- åŸºç¡€è·¯å¾„
- æ‰€å±åˆ†ç»„ä¿¡æ¯

#### 7. `yapi_create_project` - åˆ›å»ºé¡¹ç›®
**åŠŸèƒ½**: åˆ›å»ºæ–°çš„YApié¡¹ç›®
**å‚æ•°**:
- `name` (string): é¡¹ç›®åç§°
- `basepath` (string): åŸºç¡€è·¯å¾„
- `group_id` (number): æ‰€å±åˆ†ç»„ID
- `desc` (string, å¯é€‰): é¡¹ç›®æè¿°
- `color` (string, å¯é€‰): é¡¹ç›®é¢œè‰²
- `icon` (string, å¯é€‰): é¡¹ç›®å›¾æ ‡

#### 8. `yapi_update_project` - æ›´æ–°é¡¹ç›®
**åŠŸèƒ½**: æ›´æ–°é¡¹ç›®ä¿¡æ¯
**å‚æ•°**:
- `id` (number): é¡¹ç›®ID
- `name` (string, å¯é€‰): é¡¹ç›®åç§°
- `basepath` (string, å¯é€‰): åŸºç¡€è·¯å¾„
- `desc` (string, å¯é€‰): é¡¹ç›®æè¿°
- `color` (string, å¯é€‰): é¡¹ç›®é¢œè‰²
- `icon` (string, å¯é€‰): é¡¹ç›®å›¾æ ‡

### ğŸ“ åˆ†ç±»ç®¡ç† (4ä¸ªå·¥å…·)

#### 9. `yapi_get_categories` - è·å–åˆ†ç±»åˆ—è¡¨
**åŠŸèƒ½**: è·å–é¡¹ç›®ä¸‹çš„æ‰€æœ‰æ¥å£åˆ†ç±»
**å‚æ•°**:
- `projectId` (string): é¡¹ç›®ID

**è¿”å›ä¿¡æ¯**:
- åˆ†ç±»åŸºæœ¬ä¿¡æ¯
- æ¯ä¸ªåˆ†ç±»ä¸‹çš„æ¥å£åˆ—è¡¨
- åˆ†ç±»åˆ›å»ºå’Œæ›´æ–°æ—¶é—´

#### 10. `yapi_create_category` - åˆ›å»ºåˆ†ç±»
**åŠŸèƒ½**: åœ¨é¡¹ç›®ä¸­åˆ›å»ºæ–°çš„æ¥å£åˆ†ç±»
**å‚æ•°**:
- `name` (string): åˆ†ç±»åç§°
- `project_id` (number): é¡¹ç›®ID
- `desc` (string, å¯é€‰): åˆ†ç±»æè¿°

#### 11. `yapi_update_category` - æ›´æ–°åˆ†ç±»
**åŠŸèƒ½**: æ›´æ–°åˆ†ç±»ä¿¡æ¯
**å‚æ•°**:
- `catId` (string): åˆ†ç±»ID
- `name` (string): åˆ†ç±»åç§°
- `desc` (string, å¯é€‰): åˆ†ç±»æè¿°

#### 12. `yapi_delete_category` - åˆ é™¤åˆ†ç±»
**åŠŸèƒ½**: åˆ é™¤æŒ‡å®šåˆ†ç±»
**å‚æ•°**:
- `catId` (string): åˆ†ç±»ID

### ğŸ‘¤ ç”¨æˆ·ç®¡ç† (2ä¸ªå·¥å…·)

#### 13. `yapi_get_user_info` - è·å–ç”¨æˆ·ä¿¡æ¯
**åŠŸèƒ½**: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯
**è¿”å›ä¿¡æ¯**:
- ç”¨æˆ·IDå’Œç”¨æˆ·å
- é‚®ç®±åœ°å€
- ç”¨æˆ·è§’è‰²å’Œæƒé™
- è´¦æˆ·åˆ›å»ºå’Œæ›´æ–°æ—¶é—´

#### 14. `yapi_get_user_groups` - è·å–ç”¨æˆ·åˆ†ç»„
**åŠŸèƒ½**: è·å–ç”¨æˆ·æ‰€å±çš„åˆ†ç»„åˆ—è¡¨
**è¿”å›ä¿¡æ¯**:
- åˆ†ç»„IDå’Œåç§°
- åˆ†ç»„æè¿°
- æˆå‘˜æ•°é‡
- åˆ†ç»„åˆ›å»ºæ—¶é—´

### ğŸ§ª æµ‹è¯•é›†åˆ (2ä¸ªå·¥å…·)

#### 15. `yapi_get_test_collections` - è·å–æµ‹è¯•é›†åˆ
**åŠŸèƒ½**: è·å–é¡¹ç›®çš„æµ‹è¯•é›†åˆåˆ—è¡¨
**å‚æ•°**:
- `projectId` (string): é¡¹ç›®ID

**è¿”å›ä¿¡æ¯**:
- æµ‹è¯•é›†åˆåŸºæœ¬ä¿¡æ¯
- åˆ›å»ºå’Œæ›´æ–°æ—¶é—´
- é›†åˆæè¿°

#### 16. `yapi_create_test_collection` - åˆ›å»ºæµ‹è¯•é›†åˆ
**åŠŸèƒ½**: åˆ›å»ºæ–°çš„æµ‹è¯•é›†åˆ
**å‚æ•°**:
- `name` (string): é›†åˆåç§°
- `project_id` (number): é¡¹ç›®ID
- `desc` (string, å¯é€‰): é›†åˆæè¿°

### ğŸ“¥ğŸ“¤ æ•°æ®å¯¼å…¥å¯¼å‡º (2ä¸ªå·¥å…·)

#### 17. `yapi_import_swagger` - å¯¼å…¥Swaggeræ•°æ®
**åŠŸèƒ½**: å°†Swaggeræ–‡æ¡£å¯¼å…¥åˆ°YApié¡¹ç›®
**å‚æ•°**:
- `projectId` (string): ç›®æ ‡é¡¹ç›®ID
- `catId` (string): ç›®æ ‡åˆ†ç±»ID
- `swaggerData` (string): Swagger JSONæ•°æ®
- `merge` (string, å¯é€‰): åˆå¹¶æ¨¡å¼

**æ”¯æŒçš„åˆå¹¶æ¨¡å¼**:
- `normal`: æ™®é€šæ¨¡å¼
- `good`: æ™ºèƒ½åˆå¹¶
- `merge`: å®Œå…¨è¦†ç›–

#### 18. `yapi_export_project` - å¯¼å‡ºé¡¹ç›®æ•°æ®
**åŠŸèƒ½**: å¯¼å‡ºé¡¹ç›®æ•°æ®ä¸ºæŒ‡å®šæ ¼å¼
**å‚æ•°**:
- `projectId` (string): é¡¹ç›®ID
- `type` (string, å¯é€‰): å¯¼å‡ºæ ¼å¼

**æ”¯æŒçš„å¯¼å‡ºæ ¼å¼**:
- `json`: JSONæ ¼å¼
- `markdown`: Markdownæ–‡æ¡£
- `swagger`: Swaggeræ ¼å¼

### ğŸ”„ å…¶ä»–åŠŸèƒ½ (1ä¸ªå·¥å…·)

#### 19. `yapi_run_interface` - è¿è¡Œæ¥å£æµ‹è¯•
**åŠŸèƒ½**: æ‰§è¡Œæ¥å£æµ‹è¯•è¯·æ±‚
**å‚æ•°**:
- `interface_id` (string): æ¥å£ID
- `project_id` (string): é¡¹ç›®ID
- `env_id` (string, å¯é€‰): ç¯å¢ƒID
- `domain` (string, å¯é€‰): æµ‹è¯•åŸŸå
- `headers` (array, å¯é€‰): è‡ªå®šä¹‰è¯·æ±‚å¤´
- `params` (object, å¯é€‰): è¯·æ±‚å‚æ•°
- `body` (object, å¯é€‰): è¯·æ±‚ä½“

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ğŸ” æ¥å£æœç´¢ä¸ç®¡ç†

```
# æœç´¢ç™»å½•ç›¸å…³æ¥å£
è¯·æœç´¢åŒ…å«"ç™»å½•"çš„æ¥å£

# è·å–ç‰¹å®šæ¥å£è¯¦æƒ…
è¯·è·å–é¡¹ç›®654ä¸­æ¥å£IDä¸º123çš„è¯¦ç»†ä¿¡æ¯

# åˆ›å»ºæ–°æ¥å£
è¯·åœ¨é¡¹ç›®654çš„"ç”¨æˆ·ç®¡ç†"åˆ†ç±»ä¸­åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ³¨å†Œæ¥å£ï¼š
- è·¯å¾„ï¼š/api/user/register
- æ–¹æ³•ï¼šPOST
- æè¿°ï¼šç”¨æˆ·æ³¨å†Œæ¥å£
```

### ğŸ—ï¸ é¡¹ç›®åˆå§‹åŒ–

```
# åˆ›å»ºæ–°é¡¹ç›®
è¯·åˆ›å»ºä¸€ä¸ªåä¸º"ç”µå•†ç³»ç»Ÿ"çš„é¡¹ç›®ï¼ŒåŸºç¡€è·¯å¾„ä¸º"/api"

# ä¸ºé¡¹ç›®åˆ›å»ºåˆ†ç±»ç»“æ„
è¯·ä¸ºé¡¹ç›®654åˆ›å»ºä»¥ä¸‹åˆ†ç±»ï¼š
1. ç”¨æˆ·ç®¡ç†
2. å•†å“ç®¡ç†  
3. è®¢å•ç®¡ç†
4. æ”¯ä»˜ç®¡ç†
```

### ğŸ“Š æ‰¹é‡æ“ä½œ

```
# æ‰¹é‡åˆ›å»ºæ¥å£
è¯·ä¸ºç”¨æˆ·æ¨¡å—åˆ›å»ºä»¥ä¸‹æ¥å£ï¼Œéƒ½æ”¾åœ¨é¡¹ç›®654çš„ç”¨æˆ·ç®¡ç†åˆ†ç±»ä¸­ï¼š
1. GET /api/user/profile - è·å–ç”¨æˆ·ä¿¡æ¯
2. PUT /api/user/profile - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
3. DELETE /api/user/account - åˆ é™¤è´¦æˆ·

# å¯¼å…¥Swaggeræ–‡æ¡£
è¯·å°†ä»¥ä¸‹Swaggeræ•°æ®å¯¼å…¥åˆ°é¡¹ç›®654çš„APIåˆ†ç±»ä¸­ï¼š
[ç²˜è´´Swagger JSON]
```

### ğŸ§ª æµ‹è¯•ä¸éªŒè¯

```
# åˆ›å»ºæµ‹è¯•é›†åˆ
è¯·ä¸ºé¡¹ç›®654åˆ›å»ºä¸€ä¸ªåä¸º"ç”¨æˆ·æ¨¡å—æµ‹è¯•"çš„æµ‹è¯•é›†åˆ

# è¿è¡Œæ¥å£æµ‹è¯•
è¯·æµ‹è¯•é¡¹ç›®654ä¸­æ¥å£IDä¸º123çš„æ¥å£ï¼Œä½¿ç”¨æµ‹è¯•ç¯å¢ƒ
```

## ğŸ› ï¸ é¡¹ç›®ç®¡ç†

### æœåŠ¡ç®¡ç†è„šæœ¬

é¡¹ç›®æä¾›äº†ä¾¿æ·çš„ç®¡ç†è„šæœ¬ `start-mcp.sh`ï¼š

```bash
# å¯åŠ¨æœåŠ¡
./start-mcp.sh start

# æ£€æŸ¥çŠ¶æ€
./start-mcp.sh status

# åœæ­¢æœåŠ¡
./start-mcp.sh stop

# é‡å¯æœåŠ¡
./start-mcp.sh restart

# æŸ¥çœ‹æ—¥å¿—
./start-mcp.sh logs

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
./start-mcp.sh logs -f
```

### æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep "ERROR" yapi-mcp.log

# æŸ¥çœ‹ç‰¹å®šæ—¶é—´çš„æ—¥å¿—
grep "2024-01-01" yapi-mcp.log

# æ¸…ç†æ—¥å¿—
> yapi-mcp.log
```

### ç¼“å­˜ç®¡ç†

```bash
# æŸ¥çœ‹ç¼“å­˜ç›®å½•
ls -la .yapi-cache/

# æ¸…ç†ç¼“å­˜
rm -rf .yapi-cache/*

# é‡æ–°æ„å»ºç¼“å­˜
./start-mcp.sh restart
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### ğŸª Cookieè®¤è¯é—®é¢˜

**é—®é¢˜**: "è¯·ç™»å½•..." é”™è¯¯
```bash
# è§£å†³æ–¹æ¡ˆ
1. é‡æ–°ç™»å½•YApiè·å–æ–°Cookie
2. æ£€æŸ¥Cookieæ ¼å¼æ˜¯å¦å®Œæ•´
3. ç¡®è®¤YApiæœåŠ¡å™¨åœ°å€æ­£ç¡®
```

**é—®é¢˜**: "æœªé…ç½®é¡¹ç›®IDï¼Œæ— æ³•åŠ è½½é¡¹ç›®ä¿¡æ¯"
```bash
# è§£å†³æ–¹æ¡ˆ
1. ç¡®ä¿CookieåŒ…å« _yapi_token å’Œ _yapi_uid
2. æ£€æŸ¥Cookieæ˜¯å¦è¢«æˆªæ–­
3. é‡æ–°å¤åˆ¶å®Œæ•´çš„Cookieå­—ç¬¦ä¸²
```

#### ğŸ”‘ Tokenè®¤è¯é—®é¢˜

**é—®é¢˜**: "æœªé…ç½®é¡¹ç›®ID xxx çš„token"
```bash
# è§£å†³æ–¹æ¡ˆ
1. æ£€æŸ¥ .env ä¸­ YAPI_TOKEN æ ¼å¼
2. ç¡®è®¤é¡¹ç›®IDå’ŒTokenåŒ¹é…
3. éªŒè¯Tokenæ˜¯å¦æœ‰æ•ˆ
```

#### ğŸŒ ç½‘ç»œè¿æ¥é—®é¢˜

**é—®é¢˜**: "ä¸YApiæœåŠ¡å™¨é€šä¿¡å¤±è´¥"
```bash
# è¯Šæ–­æ­¥éª¤
1. ping your-yapi-server.com
2. curl -I http://your-yapi-server.com
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
4. ç¡®è®¤YApiæœåŠ¡å™¨çŠ¶æ€
```

#### ğŸ”§ æœåŠ¡å¯åŠ¨é—®é¢˜

**é—®é¢˜**: ç«¯å£è¢«å ç”¨
```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
lsof -i :3388

# ä¿®æ”¹ç«¯å£
echo "PORT=3389" >> .env

# é‡å¯æœåŠ¡
./start-mcp.sh restart
```

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è°ƒè¯•æ—¥å¿—
echo "YAPI_LOG_LEVEL=debug" >> .env

# é‡å¯æœåŠ¡
./start-mcp.sh restart

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
./start-mcp.sh logs -f
```

### æ€§èƒ½ä¼˜åŒ–

```bash
# è°ƒæ•´ç¼“å­˜æ—¶é—´
echo "YAPI_CACHE_TTL=30" >> .env

# ç›‘æ§å†…å­˜ä½¿ç”¨
ps aux | grep node

# æ¸…ç†æ— ç”¨ç¼“å­˜
find .yapi-cache -name "*.json" -mtime +7 -delete
```

## ğŸ“– é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰å·¥å…·å¼€å‘

```typescript
// æ‰©å±•æ–°çš„MCPå·¥å…·
this.server.tool(
  "yapi_custom_tool",
  "è‡ªå®šä¹‰å·¥å…·æè¿°",
  {
    param1: z.string().describe("å‚æ•°æè¿°")
  },
  async ({ param1 }) => {
    // å·¥å…·å®ç°é€»è¾‘
    const result = await this.yapiService.customMethod(param1);
    return {
      content: [{ type: "text", text: JSON.stringify(result, null, 2) }]
    };
  }
);
```

### æ‰¹é‡æ•°æ®å¤„ç†

```typescript
// æ‰¹é‡å¯¼å…¥æ¥å£
const interfaces = [
  { title: "æ¥å£1", path: "/api/test1", method: "GET" },
  { title: "æ¥å£2", path: "/api/test2", method: "POST" }
];

for (const interfaceData of interfaces) {
  await yapiService.saveInterface({
    ...interfaceData,
    project_id: "654",
    catid: "123"
  });
}
```

### é›†æˆCI/CD

```yaml
# GitHub Actions ç¤ºä¾‹
name: YApi Sync
on:
  push:
    branches: [main]

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '16'
      - name: Install dependencies
        run: npm install
      - name: Sync to YApi
        run: |
          npm run build
          node scripts/sync-to-yapi.js
        env:
          YAPI_BASE_URL: ${{ secrets.YAPI_BASE_URL }}
          YAPI_TOKEN: ${{ secrets.YAPI_TOKEN }}
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone git@github.com:guocong-bincai/YAPI_MCP_PRO.git
cd YAPI_MCP_PRO

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æ¨¡å¼
pnpm run dev

# è¿è¡Œæµ‹è¯•
pnpm test

# ä»£ç æ ¼å¼åŒ–
pnpm run format

# ç±»å‹æ£€æŸ¥
pnpm run type-check
```

### æäº¤è§„èŒƒ

```bash
# åŠŸèƒ½å¼€å‘
git commit -m "feat: æ·»åŠ æ–°çš„MCPå·¥å…·"

# é—®é¢˜ä¿®å¤
git commit -m "fix: ä¿®å¤Cookieè®¤è¯é—®é¢˜"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°ä½¿ç”¨æŒ‡å—"

# æ€§èƒ½ä¼˜åŒ–
git commit -m "perf: ä¼˜åŒ–ç¼“å­˜æœºåˆ¶"
```

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®‰å…¨å¼€å‘
- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ç¼–å†™å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒåŠŸèƒ½
- æ·»åŠ è¯¦ç»†çš„ JSDoc æ³¨é‡Š

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™‹â€â™‚ï¸ æ”¯æŒä¸åé¦ˆ

### è·å–å¸®åŠ©

1. **æ–‡æ¡£ä¼˜å…ˆ**: æŸ¥çœ‹æœ¬READMEå’Œç›¸å…³æ–‡æ¡£
2. **æ—¥å¿—åˆ†æ**: æ£€æŸ¥ `yapi-mcp.log` æ–‡ä»¶
3. **ç¤¾åŒºæ”¯æŒ**: æäº¤GitHub Issue
4. **å•†ä¸šæ”¯æŒ**: è”ç³»é¡¹ç›®ç»´æŠ¤è€…

### é—®é¢˜æŠ¥å‘Š

æäº¤Issueæ—¶è¯·åŒ…å«ï¼š
- è¯¦ç»†çš„é”™è¯¯æè¿°
- å®Œæ•´çš„é”™è¯¯æ—¥å¿—
- ç¯å¢ƒä¿¡æ¯ï¼ˆNode.jsç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰
- å¤ç°æ­¥éª¤
- é…ç½®æ–‡ä»¶ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰

### åŠŸèƒ½å»ºè®®

æ¬¢è¿æäº¤åŠŸèƒ½å»ºè®®å’Œæ”¹è¿›æ„è§ï¼š
- æè¿°å…·ä½“çš„ä½¿ç”¨åœºæ™¯
- è¯´æ˜æœŸæœ›çš„åŠŸèƒ½è¡Œä¸º
- æä¾›ç›¸å…³çš„å‚è€ƒèµ„æ–™

---

## ğŸ‰ å¿«é€Ÿå¼€å§‹æ¨¡æ¿

```bash
# ä¸€é”®å¯åŠ¨
git clone git@github.com:guocong-bincai/YAPI_MCP_PRO.git
cd YAPI_MCP_PRO
cp .env.example .env
# ç¼–è¾‘ .env é…ç½®ä½ çš„YApiä¿¡æ¯
pnpm install
pnpm run build
./start-mcp.sh start

# é…ç½®Cursor
# åœ¨ settings.json ä¸­æ·»åŠ ï¼š
# "mcpServers": {
#   "yapi-mcp-pro": {
#     "url": "http://localhost:3388/sse"
#   }
# }

# å¼€å§‹ä½¿ç”¨
# åœ¨Cursorä¸­è¾“å…¥ï¼šè¯·åˆ—å‡ºæ‰€æœ‰YApié¡¹ç›®
```

**ğŸš€ ç°åœ¨ä½ å·²ç»æ‹¥æœ‰äº†æœ€å¼ºå¤§çš„YApi AIåŠ©æ‰‹ï¼**

